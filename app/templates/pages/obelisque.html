{% extends "conteneur.html" %}

{% block titre %}
    | {{obelisque.obelisque_nom}}
{% endblock %}

{% block corps %}
    <style type="text/css">
        .illustration  {
            text-align: center;
            font-style: italic;
        }
    </style>

    <h1>{{obelisque.obelisque_nom}}</h1>
    <br>
    <div class="illustration">
        <img src="../../static/images/img_obelisques/{{obelisque.obelisque_image_nom}}" height="500" alt="Illustration"/>
        <br>
        <a href="{{obelisque.obelisque_image_url}}" target="_blank">{{obelisque.obelisque_image_auteur}}</a>, <a href="{{obelisque.obelisque_image_licence_url}}" target="_blank">{{obelisque.obelisque_image_licence}}</a>
    </div>
    <br>
    {{obelisque.obelisque_notice}}
    <br>
    <dl>
        <br>
        <dt>Matériau</dt><dd>{{obelisque.obelisque_materiau}}</dd>
        <dt>Hauteur (en mètres)</dt><dd>{{obelisque.obelisque_hauteur}}</dd>
        <dt>Hauteur avec base (en mètres)</dt><dd>{{obelisque.obelisque_hauteur_avec_base}}</dd>
        <dt>Type de commande</dt><dd>{{obelisque.obelisque_type_commande}}</dd>
    </dl>
    <br>
    <dt>Élévations successives :</dt>
<br>
<ul >
    {% for erige in erige %}
    <li>
    <b>{{erige.erige_date}} : </b><a href="/lieu/{{erige.localisation.localisation_id}}" target="_blank">{{erige.localisation.localisation_lieu}}</a> ({{erige.localisation.localisation_ville}}, {{erige.localisation.localisation_pays}}) | Commanditaire : <a href="/personne/{{erige.personne.personne_id}}" target="_blank">{{erige.personne.personne_nom}}</a>{% if erige.personne.personne_fonction %}, {{erige.personne.personne_fonction}}{% endif %} {% if erige.personne.personne_nationalite %}{{erige.personne.personne_nationalite}}{% endif %}
    </li>
  {% endfor%}
</ul>
<div id="map" style="width: 780px; height: 600px">
            <script type="text/javascript">
            var macarte = L.map('map').setView([35.74821204259156, 20.944031638393625], 4);

                L.tileLayer('https://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png', {
                    // Il est toujours bien de laisser le lien vers la source des données
                    attribution: 'données © <a href="//osm.org/copyright">OpenStreetMap</a>/ODbL - rendu <a href="//openstreetmap.fr">OSM France</a>',
                    minZoom: 4,
                    maxZoom: 20
                }).addTo(macarte);


        {% for erige in erige %}

                // Choix de l'icône
                var icon = L.icon({
                iconUrl: '../../static/images/icon.png',
                iconSize: [26, 40]
                });
                // Création du marqueur
                var marker = L.marker([{{erige.localisation.localisation_latitude}}, {{erige.localisation.localisation_longitude}}]);

                // Ajout à la carte
                marker.addTo(macarte);

                // Création d'un popup
                var popup = marker.bindPopup("<a href='/lieu/{{erige.localisation.localisation_id}}\'>{{erige.localisation.localisation_lieu}}</a></br><i>{{erige.localisation.localisation_ville}}</i>");
        {% endfor %}

        </script>

</div>
    <br>
    <dl>
        {% if obelisque.obelisque_inscription_latine %}
            <br>
            <dt>Inscription(s) latine(s)</dt><dd>{{obelisque.obelisque_inscription_latine}}</dd>
            <dt>Inscription(s) latine(s) traduite(s)</dt><dd>{{obelisque.obelisque_inscription_latine_traduite}}</dd>
        {% endif %}
    </dl>
    <br>
    <dt>Bibliographie</dt><dd>{{obelisque.obelisque_bibliographie}}</dd>
    <br>

    <div align="center">
        <br>
        <a href="{{url_for('index_obelisques')}}">Retour à l'index des obélisques</a>
        <br>
        <a href="{{url_for('accueil')}}">Retour à l'accueil</a>
    </div>
{% endblock %}